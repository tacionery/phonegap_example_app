// Generated by CoffeeScript 1.9.3
(function() {
  $(document).on('pagecontainershow', function(evt, ui) {
    var defaultLatLng, drawMap, fail, success;
    console.log("map");
    defaultLatLng = new google.maps.LatLng(34.0983425, -118.3267434);
    success = function(pos) {
      drawMap(new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude));
    };
    fail = function(error) {
      drawMap(defaultLatLng);
    };
    drawMap = function(latlng) {
      var map, marker, myOptions;
      myOptions = {
        zoom: 10,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };
      map = new google.maps.Map(document.getElementById('map-canvas'), myOptions);
      marker = new google.maps.Marker({
        position: latlng,
        map: map,
        title: 'Greetings!'
      });
    };
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(success, fail, {
        maximumAge: 500000,
        enableHighAccuracy: true,
        timeout: 6000
      });
    } else {
      drawMap(defaultLatLng);
    }
  });

}).call(this);
